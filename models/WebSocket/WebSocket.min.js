var wSocket=function(n){this.uri=n;this.obj=null};wSocket.prototype.input=function(n){console.log(n)};wSocket.prototype.connectToken=function(){this.connect(!0)};wSocket.prototype.connect=function(n){var t=this,i=function(n){t.socket=new WebSocket(t.uri);t.socket.onopen=function(i){i!=undefined&&(n!=""&&(t.socket.send("@[validateantiforgerytoken]@"+n),pb.LogindelCookie("WSCookieKey")),t.input({error:"connect",mes:"opened",obj:i,t:pb.unixReNow()}))};t.socket.onclose=function(n){n!=undefined&&t.input({error:"close",mes:"closed",obj:n})};t.socket.onmessage=function(n){n!=undefined&&t.input({error:"received",mes:n.data,obj:n})};t.socket.onerror=function(n){n!=undefined&&t.input({error:"error",mes:n.data,obj:n,t:pb.unixReNow()});pb.LogindelCookie("WSCookieKey")}};n?ajax.ajaxAPI("POST","/datafreash/ws",{},{},function(n){pb.LogindoCookieSetup("WSCookieKey",n,20);i(n)},!1):i("")};wSocket.prototype.sendMes=function(n){this.input({error:"send",mes:n,obj:{e:"empty"},t:pb.unixReNow()});this.socket.send(n)};